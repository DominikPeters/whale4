{% extends "polls/base.html" %}
{% load i18n %}
{% load static %}
{% load bootstrap3 %}
{% block static-extra %}
    <script src="http://d3js.org/d3.v3.js"></script>

{% endblock %}

{% block content %}

    <div class="container">

        <input type="hidden" id="url_poll" value="{% url 'scores' pk=poll.id method=method %}" />
        <input type="hidden" id="method" value="{{ method }}" />
        <input type="hidden" id="preference" value="{{ poll.preference_model }}" />
        <input type="hidden" id="round" value="{% trans 'Round' %}" />
        <input type="hidden" id="winner" value="{% trans 'Winner' %}" />
        <input type="hidden" id="approval_text" value="{% trans 'Approval threshold' %}" />
        <input type="hidden" id="scores_text" value="{% trans 'Approval scores' %}" />

        <div class="thumbnail clearfix">
            <h2>{{ poll.title }}</h2>
            <div class=" text-center margin5">
                <button class="btn btn-custom btn-lg " type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                    {% trans 'More about the' %}  {{ title }} <i class="fa fa-chevron-circle-down" aria-hidden="true"></i>

                </button>
                <a href="{% url 'results' poll.id %}"   class="btn btn-custom  btn-lg  ">{% bootstrap_icon "list" %} {% trans 'Back to the results' %}</a>
            </div>
            <div class="collapse " id="collapseExample">
                <blockquote class=' well text-justify'>
                    {{ explanation }}

                </blockquote>
            </div>


            {% if method == 4 %}
            <button class="btn btn-success btn-lg center-block" type="button" id="Shuffle_randomized"> <i class="fa fa-random" aria-hidden="true"></i>
                {% trans 'Shuffle candidates for the first round' %}
            </button>
            {% else %}
            <div class="container-fluid " id="control">
            <form class="form-inline text-center">

                <div class="form-group ">
                    <label class="control-label" for ='option'> {{ label }}:</label>
                        <select id="option" class="form-control" >
                            {% for option in options %}
                                <option value="{{option.value}}">{{option.name}}</option>
                            {% endfor %}
                        </select>
                </div>
              {% if method == 1 %}
                <div class="form-group" id="controlApproval">
                    <label class=" control-label" for ='approval'> {% trans 'Approval threshold' %}: </label>

                        <select id="approval" class="form-control" >

                        </select>
                </div>
             {% endif %}

            {% if method == 2 %}
                <div class="form-group" id="controlCondorcet" >
                    <label class=" control-label" for ='graph_type'>{% trans ' Type of Graph' %} :</label>

                        <select id="graph_type" class="form-control" >
                            <option value="node">{% trans 'Nodes Links' %}</option>
                            <option value="matrix">{% trans 'Matrix' %}</option>
                        </select>
                </div>

              {% endif %}
              </form>
            </div>
            {% endif %}

            <div id="graph" class="text-center"> </div>

        </div>

    </div>
    <script src="{% static 'polls/js/result.js' %}" type="text/javascript"></script>
    <script src="{% static 'polls/js/scoring-method.js' %}" type="text/javascript"></script>
    <script src="{% static 'polls/js/condorcet-method.js' %}" type="text/javascript"></script>
    <script src="{% static 'polls/js/run-off-method.js' %}" type="text/javascript"></script>
    <script src="{% static 'polls/js/randomized-method.js' %}" type="text/javascript"></script>
{% endblock %}