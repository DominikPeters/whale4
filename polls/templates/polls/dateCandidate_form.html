{% extends "polls/base.html" %}
{% load i18n %}
{% load bootstrap3 %}
{% load static %}
{% block content %}
    <ul class="nav nav-pills">
       <li role="presentation" ><a href="{% url 'updateVotingPoll' poll.id %}">1.General parameters {% bootstrap_icon "menu-right" %}</a></li>
        <li role="presentation" class="active" ><a href="#">2.Add candidates {% bootstrap_icon "menu-right" %}</a></li>
        <li role="presentation" class="disabled"><a href="#">3.Invite</a></li>
    </ul>
    <h3> {% trans 'Candidates' %}</h3>
    <div class="row">
        <div class="col-md-8">
            <form action="" method="post">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6">
                        <label class="control-label">First pick one or several dates</label>
                        <input type="text" class="form-control" required="required" id="datepicker" name="dates">
                    </div>
                    <div class="col-md-6">
                        {{ formset.management_form }}
                        {% bootstrap_formset_errors formset layout='inline' %}
                        <div id="form_set" >
                            {% bootstrap_formset formset layout='horizontal' %}
                        </div>
                        <div id="empty_form" style="display:none">
                            {% bootstrap_form formset.empty_form layout='horizontal' %}
                        </div>

                    </div>
                </div>
                <button type="submit" class="btn btn-primary col-md-2">
                    {% bootstrap_icon "ok" %} {% trans 'Save' %}
                </button>
            </form>
            <button  id="add_more" class="btn btn-primary col-md-2 pull-right">
                {% bootstrap_icon "plus" %} {% trans 'Add candidate' %}
            </button>
        </div>
        <div class="col-md-4">

            {% if candidates %}
                <p class="lead">Here is the current list of candidates:</p>
                <ol class="list-group">
                    {% for c in candidates %}
                        <li class="list-group-item">
                            <form action="/polls/deleteCandidate/{{c.poll.pk }}/{{c.id}}" method="get">{% csrf_token %}
                                {{ c }}
                                <button type="submit" class="close">&times;</button>
                            </form>
                        </li>
                    {% endfor %}
                </ol>
            {% else %}
                <p>No candidate yet</p>
            {% endif %}
        </div>
    </div>

      <div class= "row">
        <div class="col-md-offset-4 col-md-6 ">
            <ul class="list-inline">
                <li > <a href="{% url 'updateVotingPoll' poll.id %}"  class="btn btn-default "> {% bootstrap_icon "menu-left" %} {% trans 'Previous' %}</a></li>
                <li><a href="{% url 'success' poll.id  %}" class="btn btn-primary">{% trans 'Next' %} {% bootstrap_icon "menu-right" %}</a ></li>
            </ul>
        </div>
    </div>

    <script src="{% static 'polls/js/candidate.js' %}" type="text/javascript"></script>
{% endblock %}