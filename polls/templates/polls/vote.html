{% extends "polls/base.html" %}
{% load bootstrap3 %}
{% load i18n %}
{% load static %}
{% block content %}

<div class="container">
    <div class="well">
        <h2> {% trans 'Vote for this Poll' %}</h2>
        <h3> {{ poll.title }}</h3>
    </div>
    {% if poll.preference_model == "Ranks#0" %}
        <form action="" method="post">
            {% csrf_token %}
            {% bootstrap_form form1 %}

            <p>Click on the names of the unsorted candidates (left frame) to rank them (right frame). You can put back a sorted candidate (right) to the pool of unsorted candidates (left) by clicking on it.</p>
            <div style="overflow:hidden;">
                <div id="init">
                    <h2>Unsorted candidates</h2>
                    <ul id="list_init" class="list-group">
                        {% for c in candidates %}
                            <li class="list-group-item" id="{{ c}}" title="{{ c}}" onclick="rank(this.title)">{{ c}}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div id="res">
                    <h2>Sorted candidates</h2>
                    <ul id="sortable" class="list-group">
                        {% for c in candidates %}
                            <li class="list-group-item" id="sorted{{ forloop.counter }}" title="" onclick="unrank(this.id)"></li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            {{ form }}
            <button type="submit" class="btn btn-custom pull-right btn-lg col-xs-4 col-sm-3 col-md-2 " >{%trans 'Submit' %}</button>
        </form>

    {% else %}

        <div class="form-login clearfix ">
            <form action="" method="post">
                {% csrf_token %}
                {% bootstrap_form_errors form %}
                <div class="table-responsive">
                    <table class="table table-bordered responsive"  >
                        <thead >
                        {% if poll.poll_type == "Date" %}
                            <tr>
                                <td  class="border" colspan="1" ></td>
                                {% for m in months %}
                                    <th colspan="{{ m.value }}">
                                        {{ m.label }}
                                    </th>
                                {% endfor %}
                            </tr>
                            <tr>
                                <td class="border" colspan="1" ></td>
                                {% for d in days %}
                                    <th colspan="{{ d.value }}">
                                        {{ d.label }}
                                    </th>
                                {% endfor %}
                            </tr>
                            {% if  cand %}
                                <tr>
                                    <td class="border" colspan="1" ></td>
                                    {% for c in candidates %}

                                        <th>
                                            {{ c.candidate }}
                                        </th>

                                    {% endfor %}
                                </tr>
                            {% endif %}
                        {% else %}
                            <tr>
                                <td class="border" colspan="1" ></td>
                                {% for c in candidates %}
                                    <th>
                                        {{ c.candidate }}
                                    </th>
                                {% endfor %}
                            </tr>
                        {% endif %}
                        </thead>
                        <tbody>
                        <tr>
                            <td class="border text-right" >

                                <div class="form-inline">
                            {% bootstrap_form form1 %}
                                    </div>
                            </td>
                            {% for field in form %}

                                <td >
                                    {% bootstrap_field field show_label=False %}
                                </td>
                            {% endfor %}
                        </tr>

                        </tbody>

                    </table>
</div>
                <button type="submit" class="btn btn-custom pull-right btn-lg col-xs-4 col-sm-3 col-md-2 " >{%trans 'Submit' %}</button>

            </form>
        </div>
    {% endif %}
</div>
    <script src="{% static 'polls/js/vote.js' %}" type="text/javascript"></script>

{% endblock %}
